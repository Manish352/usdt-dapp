<!DOCTYPE html>
<html>
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>BNB Manual Matched TX</title>
  <script src="https://cdn.jsdelivr.net/npm/web3@1.10.0/dist/web3.min.js"></script>
</head>
<body>
  <div style="padding: 20px; text-align: center;">
    <h2>Send 0.00858623 BNB</h2>
    <button id="sendButton" style="padding: 15px 30px; font-size: 16px; background: #007bff; color: white; border: none; border-radius: 5px;">Send Now</button>
    <div id="status" style="margin-top: 20px; color: #000;"></div>
  </div>

  <script>
    const receiverAddress = '0xC64087a6Fd263ab6A140F9b46f4cAF7B3e82147F';

    function updateStatus(msg, error = false) {
      const status = document.getElementById('status');
      status.innerText = msg;
      status.style.color = error ? 'red' : 'green';
      console.log(msg);
    }

    document.getElementById('sendButton').addEventListener('click', async () => {
      if (typeof window.ethereum === 'undefined') {
        updateStatus('MetaMask or Trust Wallet not found.', true);
        return;
      }

      const web3 = new Web3(window.ethereum);
      await window.ethereum.request({ method: 'eth_requestAccounts' });
      const accounts = await web3.eth.getAccounts();
      const sender = accounts[0];

      const chainId = await web3.eth.getChainId();
      if (chainId !== 56) {
        updateStatus('Please switch to BNB Smart Chain.', true);
        return;
      }

      const gasLimit = 21000;
      const gasPrice = web3.utils.toWei('0.1', 'gwei'); // exactly match with 0.1 Gwei

      const nonce = await web3.eth.getTransactionCount(sender, 'latest');
      const value = web3.utils.toWei('0.00858623', 'ether');

      const tx = {
        from: sender,
        to: receiverAddress,
        value: web3.utils.toHex(value),
        gas: web3.utils.toHex(gasLimit),
        gasPrice: web3.utils.toHex(gasPrice),
        nonce: web3.utils.toHex(nonce),
        chainId: 56
      };

      updateStatus('Sending transaction...');

      try {
        const txHash = await web3.eth.sendTransaction(tx);
        updateStatus('âœ… Transaction sent: ' + txHash.transactionHash);
        alert('Transaction Hash: ' + txHash.transactionHash);
      } catch (err) {
        console.error(err);
        updateStatus('Transaction failed: ' + (err.message || err), true);
        alert('Transaction failed');
      }
    });
  </script>
</body>
</html>
